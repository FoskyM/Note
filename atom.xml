<?xml version="1.0" encoding="utf-8"?><?xml-stylesheet type="text/xsl" href="https://note.fosky.top/atom.xsl"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="zh-CN">
  <id>https://note.fosky.top/</id>
  <title>傅四霁的笔记</title>
  <subtitle>傅四霁的笔记</subtitle>
  <updated>2024-06-30T04:08:46.610Z</updated>
  <generator>@vuepress/plugin-feed</generator>
  <link rel="self" href="https://note.fosky.top/atom.xml"/>
  <link rel="alternate" href="https://note.fosky.top/"/>
  <entry>
    <title type="text">Windows Server 上配置 SSH 服务</title>
    <id>https://note.fosky.top/tools/develop/win-ssh.html</id>
    <link href="https://note.fosky.top/tools/develop/win-ssh.html"/>
    <updated>2024-06-29T12:25:34.000Z</updated>
    <summary type="html"><![CDATA[<h2>前言</h2>
<p>说起来我也想不到有天我需要在 windows 上配置 ssh 服务。
有此需求一是我从学校信息办老师那里拿了台服务器来玩，但是服务器系统是 Windows Server 2022；
二则是某个课程用到了 Win10 虚拟机，因为懒得一个个装软件了，所以使用 VS Code 的远程开发。</p>
<h2>配置 SSH</h2>
<p>前面按照搜索引擎结果即可配置完成，但我遇到了一个坑：Windows 的权限问题。</p>
<p>在配置完成后，我依然无法使用秘钥对认证，查看调试信息提示没有进入 <code>authorized_keys</code> 的权限，但不管我如何按照教程修改 <code>.ssh/authorized_keys</code> 文件夹的权限，依然无法使用。</p>]]></summary>
    <content type="html"><![CDATA[<h2>前言</h2>
<p>说起来我也想不到有天我需要在 windows 上配置 ssh 服务。
有此需求一是我从学校信息办老师那里拿了台服务器来玩，但是服务器系统是 Windows Server 2022；
二则是某个课程用到了 Win10 虚拟机，因为懒得一个个装软件了，所以使用 VS Code 的远程开发。</p>
<h2>配置 SSH</h2>
<p>前面按照搜索引擎结果即可配置完成，但我遇到了一个坑：Windows 的权限问题。</p>
<p>在配置完成后，我依然无法使用秘钥对认证，查看调试信息提示没有进入 <code>authorized_keys</code> 的权限，但不管我如何按照教程修改 <code>.ssh/authorized_keys</code> 文件夹的权限，依然无法使用。</p>
<p>在我千方百计的查找后，我找到了这篇文章：<a href="https://blog.51cto.com/u_12302929/3394257" target="_blank" rel="noopener noreferrer">Windows支持 OpenSSH 了！</a></p>
<p>把 <code>authorized_keys</code> 文件夹删了，使用如下命令在 <code>.ssh</code> 目录下创建 <code>authorized_keys.txt</code> 文件，把公钥粘贴过去。</p>
<div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF">notepad</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> authorized_keys</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p>然后重命名为 <code>authorized_keys</code></p>
<div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF">mv</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> .</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2">\a</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379">uthorized_keys.txt</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> .</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2">\a</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379">uthorized_keys</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p>再次尝试可以连接了。</p>
]]></content>
    <published>2024-06-29T12:25:34.000Z</published>
  </entry>
  <entry>
    <title type="text">Git 的使用</title>
    <id>https://note.fosky.top/tools/develop/git.html</id>
    <link href="https://note.fosky.top/tools/develop/git.html"/>
    <updated>2024-06-29T12:21:51.000Z</updated>
    <summary type="html"><![CDATA[<h2>修改默认分支</h2>
<div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF">git</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> config</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66"> --global</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> init.defaultBranch</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> main</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div>]]></summary>
    <content type="html"><![CDATA[<h2>修改默认分支</h2>
<div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF">git</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> config</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66"> --global</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> init.defaultBranch</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> main</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><h2>修改提交邮箱</h2>
<div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF">git</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> config</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66"> --global</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> user.email</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> "&lt;EMAIL&gt;"</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><h2>批量修改历史提交记录中的邮箱</h2>
<div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF">git</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> filter-branch</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66"> -f</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66"> --env-filter</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> '</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379">  OLD_EMAIL="旧邮箱"</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379">  CORRECT_NAME="用户名"</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379">  CORRECT_EMAIL="新邮箱"</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379">  if [ "$GIT_COMMITTER_EMAIL" = "$OLD_EMAIL" ]</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379">  then</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379">    export GIT_COMMITTER_NAME="$CORRECT_NAME"</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379">    export GIT_COMMITTER_EMAIL="$CORRECT_EMAIL"</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379">  fi</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379">  if [ "$GIT_AUTHOR_EMAIL" = "$OLD_EMAIL" ]</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379">  then</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379">    export GIT_AUTHOR_NAME="$CORRECT_NAME"</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379">    export GIT_AUTHOR_EMAIL="$CORRECT_EMAIL"</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379">  fi</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379">'</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66"> --tag-name-filter</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> cat</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66"> --</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66"> --branches</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66"> --tags</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>然后 <code>git push -f</code> 强制推送</p>
<h2>提交加签</h2>
<h3>GPG 操作</h3>
<div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF">gpg</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66"> --gen-key</span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic"> # 生成秘钥对</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF">gpg</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66"> --list-key</span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic"> # 列出公钥</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF">gpg</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66"> --list-secret-keys</span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic"> # 列出私钥</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF">gpg</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66"> -a</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66"> --export</span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic"> # 导出公钥</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF">gpg</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66"> -a</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66"> --export-secret-keys</span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic"> # 导出私钥</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3>设置提交公钥</h3>
<p>Github 设置中 <code>SSH and GPG keys</code> 点击 <code>New GPG Key</code>，
把刚刚导出的公钥输入进去即可。
这里可以直接看到 <code>Key ID</code></p>
<p>而后执行以下命令</p>
<div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF">git</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> config</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66"> --global</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> user.signingkey</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> "&lt;Key ID&gt;"</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF">git</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> config</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66"> --global</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> commit.gpgsign</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66"> true</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF">git</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> config</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66"> --global</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> gpg.program</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> "[git 安装目录]</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2">\\</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379">usr</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2">\\</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379">bin</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2">\\</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379">gpg.exe"</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><h3>为历史提交加签</h3>
<p>先拉取项目到本地
然后在项目目录运行 <code>git rebase -i --root</code></p>
<p>这时会跳出编辑器，把需要修改的 commit 记录前面的 <code>pick</code> 改为 <code>edit</code>，然后关闭文件。</p>
<p>而后继续在命令行中运行 <code>git commit --amend -S</code> 即可加签，
<code>amend</code> 表示修正，<code>S</code> 表示签名。</p>
<p><code>git commit --amend</code> 还可以用来修改 commit 的提交者信息，例如</p>
<div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF">git</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> commit</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66"> --amend</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66"> --author=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379">"FoskyM &lt;i@fosky.top&gt;"</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66"> -S</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p>执行命令后又会跳出编辑器，如果不需要修改 commit message 则直接关闭即可。</p>
<p>运行 <code>git rebase --continue</code> 继续修改，重复操作直到提示 <code>No rebase in progress</code></p>
<p>运行 <code>git push -f</code> 强制推送</p>
]]></content>
    <published>2024-06-29T12:21:51.000Z</published>
  </entry>
  <entry>
    <title type="text">目录</title>
    <id>https://note.fosky.top/guide.html</id>
    <link href="https://note.fosky.top/guide.html"/>
    <updated>2024-06-29T11:10:35.000Z</updated>
    <published>2024-06-29T11:10:35.000Z</published>
  </entry>
  <entry>
    <title type="text">硬件</title>
    <id>https://note.fosky.top/hardware/</id>
    <link href="https://note.fosky.top/hardware/"/>
    <updated>2024-06-29T11:59:29.000Z</updated>
    <published>2024-06-29T11:10:35.000Z</published>
  </entry>
  <entry>
    <title type="text">搞机</title>
    <id>https://note.fosky.top/phone/</id>
    <link href="https://note.fosky.top/phone/"/>
    <updated>2024-06-29T11:59:29.000Z</updated>
    <published>2024-06-29T11:10:35.000Z</published>
  </entry>
  <entry>
    <title type="text">软件开发</title>
    <id>https://note.fosky.top/software/</id>
    <link href="https://note.fosky.top/software/"/>
    <updated>2024-06-29T11:59:29.000Z</updated>
    <published>2024-06-29T11:10:35.000Z</published>
  </entry>
  <entry>
    <title type="text">工具</title>
    <id>https://note.fosky.top/tools/</id>
    <link href="https://note.fosky.top/tools/"/>
    <updated>2024-06-29T12:02:25.000Z</updated>
    <published>2024-06-29T11:10:35.000Z</published>
  </entry>
  <entry>
    <title type="text">NAS</title>
    <id>https://note.fosky.top/hardware/nas/</id>
    <link href="https://note.fosky.top/hardware/nas/"/>
    <updated>2024-06-29T11:32:58.000Z</updated>
    <published>2024-06-29T11:10:35.000Z</published>
  </entry>
  <entry>
    <title type="text">单片机</title>
    <id>https://note.fosky.top/hardware/singlechip/</id>
    <link href="https://note.fosky.top/hardware/singlechip/"/>
    <updated>2024-06-29T11:32:58.000Z</updated>
    <published>2024-06-29T11:10:35.000Z</published>
  </entry>
  <entry>
    <title type="text">后端</title>
    <id>https://note.fosky.top/software/backend/</id>
    <link href="https://note.fosky.top/software/backend/"/>
    <updated>2024-06-29T11:32:58.000Z</updated>
    <published>2024-06-29T11:10:35.000Z</published>
  </entry>
  <entry>
    <title type="text">数据库</title>
    <id>https://note.fosky.top/software/database/</id>
    <link href="https://note.fosky.top/software/database/"/>
    <updated>2024-06-29T11:32:58.000Z</updated>
    <published>2024-06-29T11:10:35.000Z</published>
  </entry>
  <entry>
    <title type="text">前端</title>
    <id>https://note.fosky.top/software/frontend/</id>
    <link href="https://note.fosky.top/software/frontend/"/>
    <updated>2024-06-29T11:32:58.000Z</updated>
    <published>2024-06-29T11:10:35.000Z</published>
  </entry>
  <entry>
    <title type="text">开发</title>
    <id>https://note.fosky.top/tools/develop/</id>
    <link href="https://note.fosky.top/tools/develop/"/>
    <updated>2024-06-29T12:02:25.000Z</updated>
    <published>2024-06-29T11:10:35.000Z</published>
  </entry>
</feed>